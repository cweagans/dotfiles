#!/usr/bin/env bash

# Ensure individual account maildirs exist.
[ -d ~/.cache/mail/Gmail ] || mkdir ~/.cache/mail/Gmail
[ -d ~/.cache/mail/Personal ] || mkdir ~/.cache/mail/Personal
[ -d ~/.cache/mail/Digitaldeployment ] || mkdir ~/.cache/mail/Digitaldeployment
[ -d ~/.cache/mail/Pineconegrove ] || mkdir ~/.cache/mail/Pineconegrove
[ -d ~/.cache/mail/Netherwire ] || mkdir ~/.cache/mail/Netherwire
[ -d ~/.cache/mail/Eagansfoundation ] || mkdir ~/.cache/mail/Eagansfoundation

# Sync everything up.
mbsync --all --verbose

# Index all the mail.
mu index --maildir ~/.cache/mail

# Update the menu bar display.
touch ~/.config/argos/maildir.sh
