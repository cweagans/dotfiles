#!/bin/zsh

declare -A plugins
plugins=(
	# Languages, frameworks, and closely related tools.
	[bun]="https://github.com/cometkim/asdf-bun.git"
	[dart]="https://github.com/PatOConnor43/asdf-dart.git"
	[flutter]="https://github.com/oae/asdf-flutter.git"
	[golang]="https://github.com/kennyp/asdf-golang.git"
	[lua]="https://github.com/Stratus3D/asdf-lua.git"
	[luaJIT]="https://github.com/smashedtoatoms/asdf-luaJIT.git"
	[nim]="https://github.com/asdf-community/asdf-nim.git"
	[nodejs]="https://github.com/asdf-vm/asdf-nodejs.git"
	[php]="https://github.com/asdf-community/asdf-php.git"
	[pipenv]="https://github.com/amrox/asdf-pyapp.git"
	[poetry]="https://github.com/asdf-community/asdf-poetry.git"
	[python]="https://github.com/danhper/asdf-python.git"
	[v]="https://github.com/ndac-todoroki/asdf-v.git"
	[yarn]="https://github.com/twuni/asdf-yarn.git"
	[zig]="https://github.com/cheetah/asdf-zig.git"

	# Datastores (and related clients).
	[elasticsearch]="https://github.com/asdf-community/asdf-elasticsearch.git"
	[memcached]="https://github.com/furkanural/asdf-memcached"
	[mysql]="https://github.com/iroddis/asdf-mysql.git"
	[postgres]="https://github.com/smashedtoatoms/asdf-postgres.git"
	[redis]="https://github.com/smashedtoatoms/asdf-redis.git"
	[redis-cli]="https://github.com/NeoHsu/asdf-redis-cli.git"
	[sqlite]="https://github.com/cLupus/asdf-sqlite.git"

	# Testing and validation.
	[act]="https://github.com/grimoh/asdf-act.git"
	[actionlint]="https://github.com/crazy-matt/asdf-actionlint.git"
	[bats]="https://github.com/timgluz/asdf-bats.git"
	[black]="https://github.com/amrox/asdf-pyapp.git"
	[dotenv-linter]="https://github.com/wesleimp/asdf-dotenv-linter.git"
	[editorconfig-checker]="https://github.com/gabitchov/asdf-editorconfig-checker.git"
	[gitleaks]="https://github.com/jmcvetta/asdf-gitleaks.git"
	[pre-commit]="https://github.com/amrox/asdf-pyapp.git"
	[shellcheck]="https://github.com/luizm/asdf-shellcheck.git"
	[shellspec]="https://github.com/poikilotherm/asdf-shellspec.git"

	# Devops tools.
	[aws]="https://github.com/amrox/asdf-pyapp.git"
	[drone]="https://github.com/virtualstaticvoid/asdf-drone.git"
	[terraform]="https://github.com/asdf-community/asdf-hashicorp.git"
	[terraform-ls]="https://github.com/asdf-community/asdf-hashicorp.git"
	[terragrunt]="https://github.com/ohmer/asdf-terragrunt.git"

	# Application services.
	[caddy]="https://github.com/salasrod/asdf-caddy.git"
	[chromedriver]="https://github.com/schinckel/asdf-chromedriver.git"
	[imagemagick]="https://github.com/mangalakader/asdf-imagemagick.git"
	[openresty]="https://github.com/smashedtoatoms/asdf-openresty.git"
)

# Just to make sure things install to the right place on the first install.
source ~/.zshrc

# Install the plugins.
for key value in ${(kv)plugins}; do
	echo "$key -> $value"
	asdf plugin add "$key" "$value"
done

# Special case -- Ansible requires extra envvar i guess.
ASDF_PYAPP_INCLUDE_DEPS=1 asdf plugin add ansible https://github.com/amrox/asdf-pyapp.git

# Install a handful of packages globally (see ~/.tool_versions for specifics).
asdf install
